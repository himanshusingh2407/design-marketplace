(this["webpackJsonpdesign-marketplace"]=this["webpackJsonpdesign-marketplace"]||[]).push([[0],{10:function(e,t,c){},12:function(e,t,c){},13:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(5),i=c.n(r),s=(c(10),c(4)),o=c(0),u=function(e){return e.images.map((function(e,t){var c=e.name,n=e.thumbnail,a=function(e,t){return"".concat("https://garden.spoonflower.com/c/").concat(null===e||void 0===e?void 0:e.split(":")[0],"/p/f/m/").concat(t)}(e.id,n);return Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("div",{className:"card-body ",children:Object(o.jsx)("img",{alt:c,"data-src":a,className:"card-img-top"})}),Object(o.jsx)("div",{className:"card-footer",children:Object(o.jsx)("div",{className:"card-name",children:c})})]},t)}))},f=c(2),d=function(e,t){switch(t.type){case"STACK_IMAGES":return Object(f.a)(Object(f.a)({},e),{},{images:e.images.concat(t.images)});case"FETCHING_IMAGES":return Object(f.a)(Object(f.a)({},e),{},{fetching:t.fetching});default:return e}},l=function(e,t){return"ADVANCE_PAGE"===t.type?Object(f.a)(Object(f.a)({},e),{},{page:e.page+1}):e};c(12);var b=function(){var e,t,c=Object(n.useReducer)(l,{page:0}),a=Object(s.a)(c,2),r=a[0],i=a[1],f=Object(n.useReducer)(d,{images:[],fetching:!0}),b=Object(s.a)(f,2),g=b[0],j=b[1],h=Object(n.useRef)(null);return e=r,t=j,Object(n.useEffect)((function(){t({type:"FETCHING_IMAGES",fetching:!0}),fetch("".concat("https://pythias.spoonflower.com/search/v1/designs","?page_offset=").concat(25*e.page,"&page_size=").concat(25)).then((function(e){return e.json()})).then((function(e){t({type:"STACK_IMAGES",images:e.page_results}),t({type:"FETCHING_IMAGES",fetching:!1})})).catch((function(e){return t({type:"FETCHING_IMAGES",fetching:!1}),e}))}),[t,e.page]),function(e,t){var c=Object(n.useCallback)((function(e){var t=new IntersectionObserver((function(c){c.forEach((function(c){if(c.intersectionRatio>0){var n=c.target,a=n.dataset.src;a?n.src=a:console.error("Image source is invalid"),t.unobserve(e)}}))}));t.observe(e)}),[]),a=Object(n.useRef)(null);Object(n.useEffect)((function(){a.current=document.querySelectorAll(e),a.current&&a.current.forEach((function(e){return c(e)}))}),[c,a,e,t])}(".card-img-top",g.images),function(e,t){var c=Object(n.useCallback)((function(e){new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&t({type:"ADVANCE_PAGE"})}))})).observe(e)}),[t]);Object(n.useEffect)((function(){e.current&&c(e.current)}),[c,e])}(h,i),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"page-title",children:"Design Marketplace"}),Object(o.jsx)("div",{id:"images",children:Object(o.jsx)("div",{className:"row",children:u(g)})}),g.fetching&&Object(o.jsx)("div",{className:"loader",children:"Loading images..."}),Object(o.jsx)("div",{id:"page-bottom-boundary",ref:h})]})},g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,14)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(b,{})}),document.getElementById("root")),g()}},[[13,1,2]]]);
//# sourceMappingURL=main.2cc3c2f5.chunk.js.map